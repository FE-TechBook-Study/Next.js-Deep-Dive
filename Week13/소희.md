# defaults.js

default.js 파일은 Parallel Routes에서 전체 페이지가 새로 고쳐졌을 때, Next.js가 슬롯의 활성 상태를 복구할 수 없는 경우, 대체(fallback)를 렌더링하는 데 사용된다.

소프트 네비게이션(클라이언트 사이드 탐색) 중에는 Next.js가 각 슬롯의 활성 상태(서브페이지)를 추적한다.

하지만, 하드 네비게이션(전체 페이지 새로고침)의 경우, Next.js는 그 활성 상태를 복구할 수 없다.

이 경우, 현재 URL과 일치하지 않는 서브페이지에 대해서는 default.js 파일이 렌더링될 수 있다.

![image.png](attachment:5cb9a637-d710-41d9-b879-96f83a3c59be:image.png)

위와 같은 폴더 구조를 고려해보자.

`@team` 슬롯에는 settings 페이지가 있지만, `@analytics` 에는 존재하지 않는다.

`/settings`로 이동할 경우, `@team` 슬롯은 settings 페이지를 렌더링하고, 동시에 `@analytics` 슬롯은 현재 활성 상태의 페이지를 유지한다.

페이지가 새로고침되면, Next.js는 `@analytics` 를 위한 `default.js` 를 렌더링한다. 만약 `default.js` 가 없다면, 대신 404 페이지가 표시된다.

추가적으로, `children` 은 암시적 슬롯이기 때문에, 부모 페이지의 활성 상태를 Next.js가 복구하지 못할 경우에 대비하여 `children` 를 위한 `default.js` 파일을 만들어 대체 콘텐츠를 렌더링하도록 해야 한다.

### 1. **소프트 네비게이션**일 때 (`Link` 컴포넌트 클릭 등)

- `/settings`로 이동하면:
  - `@team` → `settings/page.js` 렌더링됨
  - `@analytics` → **기존에 열려있던 페이지 그대로 유지됨**
    👉 Next.js는 내부 상태로 각 슬롯의 “현재 페이지”를 기억하고 있기 때문.

---

### 2. **하드 네비게이션**일 때 (ex: 브라우저 새로고침, URL 직접 입력)

- `/settings`로 새로고침하면:
  - `@team` → 당연히 `settings/page.js` 렌더링됨
  - `@analytics` → Next.js는 “어떤 페이지를 보여줘야 할지 모름”
    👉 기존 활성 페이지 상태를 잃어버렸기 때문.

### 이때 필요한 것이 default.js

→ `@analytics/default.js`

> "어떤 서브페이지가 활성 상태였는지 모르겠으니까, 기본적으로 보여줄 fallback 페이지를 노출한다."

## props

### params (optional)

이 값은 루트 세그먼트부터 슬롯의 서브페이지까지의 동적 라우트 파라미터를 포함하는 객체이다.

| Example                                    | URL          | params                              |
| ------------------------------------------ | ------------ | ----------------------------------- |
| `app/@sidebar/[artist]/default.js`         | `/zack`      | `{ artist: 'zack' }`                |
| `app/@sidebar/[artist]/[album]/default.js` | `/zack/next` | `{ artist: 'zack', album: 'next' }` |
