# ν•λ¦°

# Rendering

## 1. κΈ°λ³Έ κ°λ…

- μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ‘ κ°€μ§€ μ‹¤ν–‰ ν™κ²½μ΄ μ΅΄μ¬ν•©λ‹λ‹¤.
- μ”μ²­-μ‘λ‹µ μƒλ…μ£ΌκΈ°(Request-Response LifeCycle)μ μ΄ν•΄κ°€ μ¤‘μ”ν•©λ‹λ‹¤.
- λ„¤νΈμ›ν¬ κ²½κ³„(Network Boundary)κ°€ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ¥Ό κµ¬λ¶„ν•©λ‹λ‹¤.

### λ λ”λ§ ν™κ²½

- ν΄λΌμ΄μ–ΈνΈ : μ‚¬μ©μμ λΈλΌμ°μ €λ¥Ό μλ―Έν•λ©°, μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄κ³  λ°›μ€ μ‘λ‹µμ„ μ‚¬μ©μ μΈν„°νμ΄μ¤λ΅ λ³€ν™ν•©λ‹λ‹¤.
- μ„λ²„ : λ°μ΄ν„° μ„Όν„°μ μ»΄ν“¨ν„°λ΅, μ• ν”λ¦¬μΌ€μ΄μ… μ½”λ“λ¥Ό μ €μ¥ν•κ³  ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μ²λ¦¬ν•μ—¬ μ‘λ‹µμ„ μ „μ†΅ν•©λ‹λ‹¤.

### μ”μ²­-μ‘λ‹µ μƒλ… μ£ΌκΈ°(Request-Response LifeCycle)

1. User Action : λ§ν¬ ν΄λ¦­, νΌ μ μ¶ λ“±μ μƒνΈμ‘μ©
2. HTTP μ”μ²­ : ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— ν•„μ”ν• μ •λ³΄λ¥Ό λ‹΄μ•„ μ”μ²­
3. Server μ²λ¦¬ : μ”μ²­μ„ μ²λ¦¬ν•κ³  μ μ ν• λ¦¬μ†μ¤ μ¤€λΉ„
4. HTTP μ‘λ‹µ : μ„λ²„κ°€ μ²λ¦¬ κ²°κ³Όμ™€ ν•„μ”ν• λ¦¬μ†μ¤λ¥Ό ν΄λΌμ΄μ–ΈνΈμ— μ „μ†΅
5. Client μ²λ¦¬ : λ°›μ€ λ¦¬μ†μ¤λ¥Ό νμ‹±ν•μ—¬ UI λ λ”λ§
6. User Action : λ λ”λ§λ UIμ™€ μƒνΈμ‘μ©ν•λ©° μƒλ΅μ΄ μ£ΌκΈ° μ‹μ‘

### Network Boundary

ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ ν™κ²½μ„ κµ¬λ¶„ν•λ” κ°λ…μ  κ²½κ³„μ…λ‹λ‹¤.

Reactμ—μ„λ” `β€use Clientβ€` μ™€ `β€use Serverβ€` κ·μ•½μ„ ν†µν•΄ κ²½κ³„λ¥Ό μ •μν•  μ μμµλ‹λ‹¤.

μ„λ²„ λ¨λ“ κ·Έλν”„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ“ κ·Έλν”„λ΅ μ‘μ—…μ„ λ¶„λ¦¬ν•©λ‹λ‹¤.

### Building Hybrid Applications

μ‘λ‹µ μ¤‘μ—λ” μ• ν”λ¦¬μΌ€μ΄μ… μ½”λ“κ°€ μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈλ΅ λ‹¨λ°©ν–¥μΌλ΅ νλ¦…λ‹λ‹¤.

ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„ μ ‘κ·Όμ΄ ν•„μ”ν• κ²½μ° λ™μΌν• μ”μ²­μ„ μ¬μ‚¬μ©ν•λ” λ€μ‹  μƒ μ”μ²­μ„ λ³΄λ‚΄μ•Όν•©λ‹λ‹¤.

μ΄ λ¨λΈμ€ μ„λ²„μ—μ„ λ¨Όμ € μ‹¤ν–‰ν•  μ‘μ—…μ„ κ²°μ •ν• ν›„, κ²°κ³Όλ¥Ό ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅ν•μ—¬ μΈν„°λ™ν‹°λΈν•κ² λ§λ“λ” λ°©μ‹μ„ κ¶μ¥ν•©λ‹λ‹¤.

---

## 2. Server Components

### κΈ°λ³Έ κ°λ…

- μ„λ²„μ—μ„ λ λ”λ§λκ³  μ„ νƒμ μΌλ΅ μΊμ‹λ  μ μλ” UIλ¥Ό μ‘μ„±ν•  μ μμµλ‹λ‹¤.
- Next.jsμ—μ„λ” λΌμ°νΈ μ„Έκ·Έλ¨ΌνΈλ³„λ΅ λ λ”λ§ μ‘μ—…μ„ λ¶„ν• ν•μ—¬ μ¤νΈλ¦¬λ°κ³Ό λ¶€λ¶„ λ λ”λ§μ„ μ§€μ›ν•©λ‹λ‹¤.
- μ„Έ κ°€μ§€ μ„λ²„ λ λ”λ§ μ „λµ
  - Static Rendering
  - Dynamic Rendering
  - Streaming

### Server Renderingμ μ£Όμ” μ΄μ 

- Data Fetching : λ°μ΄ν„° κ°€μ Έμ¤κΈ°λ¥Ό λ°μ΄ν„° μ†μ¤μ™€ κ°€κΉμ΄ μ„λ²„μ—μ„ μ²λ¦¬ν•μ—¬ μ‹κ°„ λ° μ”μ²­ νμλ¥Ό μ¤„μ΄κ³  μ„±λ¥ ν–¥μƒ
- Security : λ―Όκ°ν• λ°μ΄ν„°μ™€ λ΅μ§μ„ μ„λ²„μ—μ„ μ•μ „ν•κ² μ μ§€
- Caching : λ λ”λ§ κ²°κ³Όλ¥Ό μΊμ‹ν•μ—¬ ν›„μ† μ”μ²­μ—μ„ μ¬μ‚¬μ© κ°€λ¥
- Performance : ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄νΈ JS μ–‘μ„ μ¤„μ—¬ μµμ ν™”
- Initial Page Load and First Contentful Paint(FCP) : μ„λ²„μ—μ„ μ‚¬μ©μκ°€ νμ΄μ§€ λ λ”λ§μ— ν•„μ”ν• JSλ¥Ό λ‹¤μ΄λ΅λ“, λ¶„μ„ λ° μ‹¤ν–‰ν•  λ•κΉμ§€ κΈ°λ‹¤λ¦¬μ§€ μ•κ³  μ¦‰μ‹ νμ΄μ§€λ¥Ό λ΅λ“ν•  μ μμ.
- Search Engine Optimization and Social Network Shareability : λ λ”λ§λ HTMLμ€ κ²€μƒ‰ μ—”μ§„ λ΄‡μ΄ νμ΄μ§€λ¥Ό μΈλ±μ‹±ν•λ” λ° μ‚¬μ©ν•κ³  μ†μ… λ„¤νΈμ›ν¬ λ΄‡μ΄ νμ΄μ§€μ— λ€ν• μ†μ… μΉ΄λ“ λ―Έλ¦¬λ³΄κΈ°λ¥Ό μƒμ„±ν•λ” λ° μ‚¬μ©λ¨
- Streaming : λ λ”λ§ μ‘μ—…μ„ μ²­ν¬λ΅ λ¶„ν• ν•μ—¬ μ μ§„μ  λ΅λ”© κ°€λ¥. μ‚¬μ©μλ” μ „μ²΄ νμ΄μ§€κ°€ λ λ”λ§λ  λ•κΉμ§€ κΈ°λ‹¤λ¦΄ ν•„μ” μ—†μ΄ μΌλ¶€λ§ μΌμ° λ³Ό μ μμµλ‹λ‹¤.

### Server Componentsμ λ λ”λ§ ν”„λ΅μ„Έμ¤

μ„λ²„μ—μ„ Next.jsλ” Reactμ APIλ¥Ό μ‚¬μ©ν•μ—¬ λ λ”λ§μ„ μ΅°μ •ν•©λ‹λ‹¤. λ λ”λ§ μ‘μ—…μ€ κ°λ³„ κ²½λ΅ μ„Έκ·Έλ¨ΌνΈμ™€ μ„μ¤νμ¤ κ²½κ³„λ΅ λ‚λ„μ–΄μ§‘λ‹λ‹¤.

κ° μ²­ν¬λ” λ‘ λ‹¨κ³„λ΅ λ λ”λ§ λ©λ‹λ‹¤.

[μ„λ²„ λ‹¨κ³„]

1. Reactκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό RSC(React Server Component) Payloadλ΅ λ³€ν™
2. Next.jsκ°€ RSC Payloadμ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ Javascriptλ¥Ό μ‚¬μ©ν•΄ HTML λ λ”λ§

[ν΄λΌμ΄μ–ΈνΈ λ‹¨κ³„]

1. HTMLμ„ μ‚¬μ©ν•΄ λΉ λ¥Έ μ΄κΈ° λ―Έλ¦¬λ³΄κΈ° ν‘μ‹(μƒνΈμ‘μ© λ¶κ°€)
2. RSC Payloadλ¥Ό μ‚¬μ©ν•΄ ν΄λΌμ΄μ–ΈνΈ/μ„λ²„ μ»΄ν¬λ„νΈ νΈλ¦¬ μ΅°μ •, DOM μ—…λ°μ΄νΈ
3. Javascriptλ΅ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ ν•μ΄λ“λ μ΄μ…(μ΄λ²¤νΈ λ¦¬μ¤λ„ λ¶€μ°©)

> π’΅ RSC Payload

    λ λ”λ§λ React Server Components νΈλ¦¬μ κ°„κ²°ν• μ΄μ§„ ν‘ν„μ…λ‹λ‹¤. Reactμ—μ„ λΈλΌμ°μ €μ DOMμ„ μ—…λ°μ΄νΈν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.
    λ‹¤μκ³Ό κ°™μ€ λ‚΄μ©μ„ ν¬ν•¨ν•©λ‹λ‹¤.
    - μ„λ²„ μ»΄ν¬λ„νΈμ λ λ”λ§ κ²°κ³Ό
    - ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§λμ–΄μ•Ό ν•  μ„μΉλ¥Ό λ‚νƒ€λ‚΄λ” placeholder
    - ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ Javascript νμΌ μ°Έμ΅°
    - μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ μ „λ‹¬λ props

### Server Rendering μ „λµ

1. μ •μ  λ λ”λ§ (Static Rendering) - default
   - λΉλ“ μ‹μ  λλ” λ°μ΄ν„° μ¬κ²€μ¦ ν›„ λ°±κ·ΈλΌμ΄λ“μ—μ„ λΌμ°νΈλ¥Ό λ λ”λ§
   - κ²°κ³Όλ¥Ό μΊμ‹ν•μ—¬ CDNμ— λ°°ν¬ κ°€λ¥
   - μ‚¬μ©μλ³„ κ°μΈν™”λ λ°μ΄ν„°κ°€ μ—†κ³  λΉλ“μ‹ μ• μ μλ” μ •μ  μ½ν…μΈ μ— μ ν•©
2. λ™μ  λ λ”λ§ (Dynamic Rendering)
   - μ”μ²­ μ‹μ μ— μ‚¬μ©μλ³„λ΅ λ λ”λ§
   - κ°μΈν™”λ λ°μ΄ν„°κ°€ μκ±°λ‚ μΏ ν‚¤λ‚ URLμ κ²€μƒ‰ λ§¤κ°λ³€μμ™€ κ°™μ΄ μ‹¤μ‹κ°„ μ •λ³΄κ°€ ν•„μ”ν• κ²½μ°μ— μ ν•©

> π’΅ λ™μ  λ λ”λ§μΌλ΅ μ „ν™

    λ λ”λ§ μ¤‘μ— λ™μ  ν•¨μ(μΏ ν‚¤, μ”μ²­ ν—¤λ”, url params λ“± μ”μ²­μ‹μ—λ§ μ• μ μλ” μ •λ³΄μ— μμ΅΄) λλ” μΊμ‹λμ§€ μ•μ€ λ°μ΄ν„° μ”μ²­μ΄ λ°κ²¬λλ©΄ Nextλ” μ „μ²΄ κ²½λ΅λ¥Ό λ™μ μΌλ΅ λ λ”λ§ν•λ„λ΅ μ „ν™ν•©λ‹λ‹¤.
    κ²½λ΅κ°€ μ™„μ „ν μ •μ μΌλ΅ λ λ”λ§λλ ¤λ©΄ λ¨λ“  λ°μ΄ν„°κ°€ μΊμ‹λμ–΄μ•Ό ν•©λ‹λ‹¤.
    κ°λ°μλ” μ •μ  λ λ”λ§κ³Ό λ™μ  λ λ”λ§μ„ μ„ νƒν•  ν•„μ”κ°€ μ—†μµλ‹λ‹¤. Nextλ” μ‚¬μ©λ κΈ°λ¥κ³Ό APIμ— λ”°λΌ κ° κ²½λ΅μ— κ°€μ¥ μ ν•©ν• λ λ”λ§ μ „λµμ„ μλ™μΌλ΅ μ„ νƒν•©λ‹λ‹¤. λ€μ‹  νΉμ • λ°μ΄ν„°λ¥Ό μΊμ‹ν•κ±°λ‚ μ¬κ²€μ¦ μ‹κΈ°λ¥Ό μ„ νƒν•κ³ , UI μΌλ¶€λ¥Ό μ¤νΈλ¦¬λ°ν•  μ‹κΈ°λ¥Ό μ„ νƒν•  μ μμµλ‹λ‹¤.

3. μ¤νΈλ¦¬λ°(Streaming)
   - μ„λ²„μ—μ„ UIλ¥Ό μ μ§„μ μΌλ΅ λ λ”λ§
   - μ‘μ—…μ€ μ²­ν¬λ΅ λ¶„ν• λμ–΄ ν΄λΌμ΄μ–ΈνΈλ΅ μ¤νΈλ¦¬λ°λλ©° μ½ν…μΈ  λ λ”λ§μ΄ μ™„λ£λκΈ° μ „μ— νμ΄μ§€μ μΌλ¶€λ¶„μ„ λ¨Όμ € λ³΄μ—¬μ¤„ μ μμµλ‹λ‹¤.

---

## 3. Client Components

### κΈ°λ³Έ κ°λ…

- μ„λ²„μ—μ„ ν”„λ¦¬ λ λ”λ§λ ν›„ ν΄λΌμ΄μ–ΈνΈμ—μ„ javascriptλ΅ μ‹¤ν–‰λλ” μΈν„°λ™ν‹°λΈ UI
- `β€use clientβ€` μ§€μ‹μ–΄λ¥Ό ν†µν•΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ κ°„μ κ²½κ³„ μ„¤μ •
- ν•΄λ‹Ή νμΌμ—μ„ λ¶λ¬μ¤λ” λ¨λ“  λ¨λ“κ³Ό μμ‹ μ»΄ν¬λ„νΈλ“¤μ€ ν΄λΌμ΄μ–ΈνΈ λ²λ“¤μ μΌλ¶€κ°€ λ¨.

### Client Renderingμ μ£Όμ” μ΄μ 

- μƒνΈμ‘μ© : `state`, `effects`, μ΄λ²¤νΈ λ¦¬μ¤λ„λ¥Ό μ‚¬μ©ν•μ—¬ μ¦‰κ°μ μΈ μ‚¬μ©μ ν”Όλ“λ°± μ κ³µ
- λΈλΌμ°μ € API μ‚¬μ© : `geolocation`, `localStorage` λ“±μ λΈλΌμ°μ € API μ ‘κ·Ό κ°€λ¥

### λ λ”λ§ ν”„λ΅μ„Έμ¤

μ „μ²΄ νμ΄μ§€ λ΅λ“(μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ²μ λ°©λ¬Έν•κ±°λ‚ μƒλ΅κ³ μΉ¨μΌλ΅ μΈν• νμ΄μ§€ λ¦¬λ΅λ“)μΈμ§€ λλ” ν›„μ† λ„¤λΉ„κ²μ΄μ…μΈμ§€μ— λ”°λΌ λ‹¬λΌμ§‘λ‹λ‹¤.

1. **Full page load**

   [μ„λ²„ λ‹¨κ³„]

   1. Reactκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό RSC(React Server Component) Payloadλ΅ λ³€ν™
   2. Next.jsκ°€ RSC Payloadμ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ Javascriptλ¥Ό μ‚¬μ©ν•΄ HTML λ λ”λ§

   [ν΄λΌμ΄μ–ΈνΈ λ‹¨κ³„]

   1. HTMLμ„ μ‚¬μ©ν•΄ λΉ λ¥Έ μ΄κΈ° λ―Έλ¦¬λ³΄κΈ° ν‘μ‹(μƒνΈμ‘μ© λ¶κ°€)
   2. RSC Payloadλ¥Ό μ‚¬μ©ν•΄ ν΄λΌμ΄μ–ΈνΈ/μ„λ²„ μ»΄ν¬λ„νΈ νΈλ¦¬ μ΅°μ •, DOM μ—…λ°μ΄νΈ
   3. Javascriptλ΅ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ ν•μ΄λ“λ μ΄μ…(μ΄λ²¤νΈ λ¦¬μ¤λ„ λ¶€μ°©)

1. **Subsequent Navigations**
   - ν΄λΌμ΄μ–ΈνΈμ—μ„ μ „μ²΄ λ λ”λ§ μν–‰
   - JS λ²λ“¤ λ‹¤μ΄λ΅λ“ λ° νμ‹±
   - RSC Payloadλ¥Ό μ‚¬μ©ν•΄ μ»΄ν¬λ„νΈ νΈλ¦¬ μ΅°μ • λ° DOM μ—…λ°μ΄νΈ

### μ—¬λ¬ κ°μ use client μ„ μ–Έ

- μ—¬λ¬ κ°μ β€use clientβ€ μ§„μ…μ μ„ μ •μν•  μ μμΌλ©° , κ·Έ μ•„λ λ¨λ“  μμ‹ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈ λ²λ“¤μ— ν¬ν•¨λ©λ‹λ‹¤.

---

## 4. Server and Client Composition Patterns

μ„λ²„ λ° ν΄λΌμ΄μ–ΈνΈ κµ¬μ„± μ”μ†λ¥Ό μ‚¬μ©ν•  λ• κ¶μ¥λλ” λ‡ κ°€μ§€ κµ¬μ„± ν¨ν„΄μ— λ€ν•΄ λ‹¤λ£Ήλ‹λ‹¤.

### μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ μ‚¬μ© μ‹κΈ°

- **μ„λ²„ μ»΄ν¬λ„νΈ μ‚¬μ© μ‹κΈ°**
  - λ°μ΄ν„° νμΉ­
  - λ°±μ—”λ“ λ¦¬μ†μ¤ μ§μ ‘ μ ‘κ·Ό
  - λ―Όκ°ν• μ •λ³΄(API ν‚¤ λ“±) μ„λ²„ λ³΄κ΄€
  - λ€κ·λ¨ μμ΅΄μ„±μ„ μ„λ²„μ— μ μ§€
  - ν΄λΌμ΄μ–ΈνΈ μΈ΅ JavaScript μ–‘ κ°μ†
- **ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ μ‚¬μ© μ‹κΈ°**
  - μΈν„°λ™ν‹°λΈ κΈ°λ¥κ³Ό μ΄λ²¤νΈ λ¦¬μ¤λ„ μ¶”κ°€
  - μƒνƒμ™€ μƒλ…μ£ΌκΈ° ν¨κ³Ό μ‚¬μ© (useState, useEffect λ“±)
  - λΈλΌμ°μ € μ „μ© API μ‚¬μ©
  - μƒνƒ/ν¨κ³Όμ— μμ΅΄ν•λ” μ»¤μ¤ν…€ ν›… μ‚¬μ©
  - React ν΄λμ¤ μ»΄ν¬λ„νΈ μ‚¬μ©

### Server Component ν¨ν„΄

1. μ»΄ν¬λ„νΈ κ°„μ λ°μ΄ν„° κ³µμ 

   μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό νμΉ­ν•  λ•, μ»΄ν¬λ„νΈ κ°„μ— λ°μ΄ν„°λ¥Ό κ³µμ ν•λ” κ²½μ°κ°€ μμ„ μ μμµλ‹λ‹¤.

   μ„λ²„ μ»΄ν¬λ„νΈμ—μ„λ” React Contextλ” μ‚¬μ©μ΄ λ¶κ°€ν•λ©°, propsλ΅ λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•λ” λ€μ‹  `fetch` λλ” Reactμ `cache` ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ ν•„μ”ν• μ»΄ν¬λ„νΈμ—μ„ λ™μΌν• λ°μ΄ν„°λ¥Ό νμΉ­ν•  μ μμµλ‹λ‹¤.

   Reactκ°€ `fetch`λ¥Ό ν™•μ¥ν•μ—¬ λ°μ΄ν„° μ”μ²­μ„ μλ™μΌλ΅ λ©”λ¨μ΄μ μ΄μ…ν•κ³ , `fetch`λ¥Ό μ‚¬μ©ν•  μ μ—†λ” κ²½μ° `cache` ν•¨μλ¥Ό μ‚¬μ©ν•  μ μκΈ° λ•λ¬Έμ…λ‹λ‹¤.

2. Server-only μ½”λ“λ¥Ό ν΄λΌμ΄μ–ΈνΈ ν™κ²½μ—μ„ μ°¨λ‹¨ν•κΈ°

   μ„λ²„μ—μ„λ§ μ‹¤ν–‰λλ„λ΅ μλ„λ μ½”λ“κ°€ ν΄λΌμ΄μ–ΈνΈμ— μλ» ν¬ν•¨λ  μ μμµλ‹λ‹¤.

   ```tsx
   export async function getData() {
     const res = await fetch("https://external-service.com/data", {
       headers: {
         authorization: process.env.API_KEY,
       },
     });

     return res.json();
   }
   ```

   ν™κ²½ λ³€μ`API_KEY`λ” `NEXT_PUBLIC` μ ‘λ‘μ‚¬κ°€ μ—†κΈ° λ•λ¬Έμ— μ„λ²„μ—μ„λ§ μ ‘κ·Όν•  μ μλ” λΉ„κ³µκ° λ³€μμ΄λ©°, ν΄λΌμ΄μ–ΈνΈμ—μ„ λ³€μμ— μ ‘κ·Όν•λ©΄ λΉ λ¬Έμμ—΄μ„ λ°ν™ν•©λ‹λ‹¤.

   λ―Όκ°ν• μ •λ³΄λ¥Ό λ‹¤λ£¨λ” μ„λ²„ μ½”λ“μ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ©μ„ λ°©μ§€ν•κΈ° μ„ν•΄ `server-only` ν¨ν‚¤μ§€λ¥Ό μ‚¬μ©ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ μ‹¤μλ΅ importν• κ²½μ° λΉλ“ νƒ€μ„ μ¤λ¥λ¥Ό λ°μƒμ‹ν‚¬ μ μμµλ‹λ‹¤.

   ```tsx
   import "server-only";

   export async function getData() {
     // ...
   }
   ```

3. μ„λ“ νν‹° ν¨ν‚¤μ§€μ™€ Provider μ‚¬μ©

   ν΄λΌμ΄μ–ΈνΈ κΈ°λ¥μ„ μ‚¬μ©ν•λ” npm ν¨ν‚¤μ§€μ λ§μ€ μ»΄ν¬λ„νΈλ” μ•„μ§ `β€use clientβ€` μ§€μ‹μ–΄λ¥Ό ν¬ν•¨ν•κ³  μμ§€ μ•μ•„ μ„λ²„ μ»΄ν¬λ„νΈ λ‚΄μ—μ„ μ‚¬μ©ν•λ ¤κ³  ν•λ©΄ μ¤λ¥κ°€ λ°μƒν•©λ‹λ‹¤.

   ν΄λΌμ΄μ–ΈνΈ μ „μ© κΈ°λ¥μ— μμ΅΄ν•λ” μ„λ“ νν‹° μ»΄ν¬λ„νΈλ¥Ό μμ²΄ Client Componentsλ΅ λν•‘ν•μ—¬ ν•΄κ²°ν•  μ μμµλ‹λ‹¤.

   ```tsx
   "use client";

   import { Carousel } from "acme-carousel";

   export default Carousel;
   ```

   ```tsx
   import Carousel from "./carousel";

   export default function Page() {
     return (
       <div>
         <p>View pictures</p>

         {/* Works, since Carousel is a Client Component */}
         <Carousel />
       </div>
     );
   }
   ```

   3.1 Context Providers μ‚¬μ©

   React Context λ” μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ§€μ›λμ§€ μ•μΌλ―€λ΅ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ‚΄λ¶€μ—μ„ Providerλ¥Ό λ λ”λ§ν•κ³ , λ£¨νΈ λ μ΄μ•„μ›ƒμ—μ„ ν•΄λ‹Ή Providerλ¥Ό λ¶λ¬μ™€ λ λ”λ§ν•©λ‹λ‹¤.

   ```tsx
   // app/theme-providet.tsx
   "use client";

   import { createContext } from "react";

   export const ThemeContext = createContext({});

   export default function ThemeProvider({
     children,
   }: {
     children: React.ReactNode;
   }) {
     return (
       <ThemeContext.Provider value="dark">{children}</ThemeContext.Provider>
     );
   }
   ```

   ```tsx
   // app/layout.tsx
   import ThemeProvider from "./theme-provider";

   export default function RootLayout({
     children,
   }: {
     children: React.ReactNode;
   }) {
     return (
       <html>
         <body>
           <ThemeProvider>{children}</ThemeProvider>
         </body>
       </html>
     );
   }
   ```

### Client Components ν¨ν„΄

1. ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό νΈλ¦¬ μ•„λλ΅ μ΄λ™ν•κΈ°

   ν΄λΌμ΄μ–ΈνΈ μλ°”μ¤ν¬λ¦½νΈ λ²λ“¤ ν¬κΈ°λ¥Ό μ¤„μ΄λ ¤λ©΄ κ°€λ¥ν• μ»΄ν¬λ„νΈ **νΈλ¦¬ μ•„λλ΅** ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό μ΄λ™ν•λ” κ²ƒμ„ κ¶μ¥ν•©λ‹λ‹¤.

   stateλ¥Ό μ‚¬μ©ν•λ” μƒνΈμ‘μ©ν•λ” μ»΄ν¬λ„νΈ(ex. `<SearchBar />`)λ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ, μ •μ  μ”μ†λ“¤μ€ μ„λ²„ μ»΄ν¬λ„νΈλ΅ κµ¬μ„±ν•λ” λ“± λ¨λ“  μ»΄ν¬λ„νΈλ¥Ό ν΄λΌμ΄μ–ΈνΈλ΅ λ³΄λ‚Ό ν•„μ”κ°€ μ—†μµλ‹λ‹¤.

   ```tsx
   // layout.tsx (μ„λ²„ μ»΄ν¬λ„νΈ)
   import SearchBar from "./searchbar"; // ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ
   import Logo from "./logo"; // μ„λ²„ μ»΄ν¬λ„νΈ

   export default function Layout({ children }) {
     return (
       <nav>
         <Logo /> {/* μ •μ  μ”μ†λ” μ„λ²„ μ»΄ν¬λ„νΈλ΅ */}
         <SearchBar /> {/* μΈν„°λ™ν‹°λΈ μ”μ†λ§ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ */}
       </nav>
     );
   }
   ```

1. μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ props μ „λ‹¬(μ§λ ¬ν™”)

μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤λ” κ²½μ° ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ— λ°μ΄ν„°λ¥Ό propsλ΅ μ „λ‹¬ν•  μ μμΌλ©°, μ΄ propsλ” μ§λ ¬ν™”ν•  μ μμ–΄μ•Ό ν•©λ‹λ‹¤.

### Serverμ™€ Clientκ°„μ μ¤‘μ²©

μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°„μ— μ¤‘μ²©ν•  λ• μ£Όμν•΄μ•Όν•  μ‚¬ν•­μ΄ μμµλ‹λ‹¤.

- Request-Response Lifecycle λ™μ• μ½”λ“κ°€ μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈλ΅ μ΄λ™ν•©λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„μ λ°μ΄ν„°λ‚ λ¦¬μ†μ¤μ— μ ‘κ·Όν•λ” κ²½μ° μƒλ΅μ΄ μ”μ²­μ„ λ³΄λ‚΄λ” κ²ƒμ΄λ©° μ™”λ‹¤ κ°”λ‹¤ ν•λ” κ²ƒμ΄ μ•„λ‹™λ‹λ‹¤.
- μƒλ΅μ΄ μ”μ²­μ΄ μ „μ†΅λλ©΄, λ¨λ“  μ„λ²„ μ»΄ν¬λ„νΈκ°€ λ¨Όμ € λ λ”λ§λ©λ‹λ‹¤. λ λ”λ§ κ²°κ³Ό(RSC Payload)μ—λ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ μ„μΉμ— λ€ν• μ°Έμ΅°κ°€ ν¬ν•¨λ©λ‹λ‹¤. κ·Έ λ‹¤μ, ν΄λΌμ΄μ–ΈνΈμ—μ„ RSC Payloadλ¥Ό μ‚¬μ©ν•μ—¬ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό λ‹¨μΌ νΈλ¦¬λ΅ μ΅°μ •ν•©λ‹λ‹¤.
- ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ„λ²„ μ»΄ν¬λ„νΈ μ΄ν›„μ— λ λ”λ§λλ―€λ΅, ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ— μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό importν•  μ μ—†μµλ‹λ‹¤. λ€μ‹  μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό propsλ΅ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ— μ „λ‹¬ν•  μ μμµλ‹λ‹¤.

**β…Β μ§€μ›λλ” ν¨ν„΄:**

```tsx
// page.tsx (μ„λ²„ μ»΄ν¬λ„νΈ)
import ClientComponent from "./client-component";
import ServerComponent from "./server-component";

export default function Page() {
  return (
    <ClientComponent>
      <ServerComponent /> {/* μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό propμΌλ΅ μ „λ‹¬ */}
    </ClientComponent>
  );
}
```

**βΒ μ§€μ›λμ§€ μ•λ” ν¨ν„΄:**

```tsx
"use client";
// β ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ μ„λ²„ μ»΄ν¬λ„νΈ μ§μ ‘ μ„ν¬νΈ λ¶κ°€
import ServerComponent from "./server-component";
```

---

## 5. **Edge and Node.js Runtimes**

### λ°νƒ€μ„μ κΈ°λ³Έ κ°λ…

- λ°νƒ€μ„: μ½”λ“ μ‹¤ν–‰ μ¤‘μ— μ‚¬μ© κ°€λ¥ν• λΌμ΄λΈλ¬λ¦¬, API, κΈ°λ¥λ“¤μ μ§‘ν•©
- Next.jsλ” λ‘ κ°€μ§€ μ„λ²„ λ°νƒ€μ„ μ κ³µ: Node.js λ°νƒ€μ„κ³Ό Edge λ°νƒ€μ„
  1. Node.js λ°νƒ€μ„ (κΈ°λ³Έκ°’)
     - λ¨λ“  Node.js API μ‚¬μ© κ°€λ¥
     - npm μƒνƒκ³„μ λ¨λ“  ν¨ν‚¤μ§€ μ‚¬μ© κ°€λ¥
     - λ³µμ΅ν• μ—°μ‚° μ²λ¦¬ κ°€λ¥
     - μƒλ€μ μΌλ΅ κΈ΄ μ½λ“ λ¶€ν… μ‹κ°„
     - νμΌ μ‹μ¤ν… μ ‘κ·Ό κ°€λ¥
  2. Edge λ°νƒ€μ„
     - μ›Ή API κΈ°λ°μ κ²½λ‰ν™”λ λ°νƒ€μ„
     - λ§¤μ° λ‚®μ€ μ§€μ—° μ‹κ°„
     - μ ν•λ λ¦¬μ†μ¤ (1MB-4MB μ½”λ“ ν¬κΈ° μ ν•)
     - μ ν•λ Node.js API μ§€μ›
     - λΉ λ¥Έ μ‹μ‘ μ‹κ°„

### λ°νƒ€μ„ λΉ„κµ

```
κΈ°λ¥          Node.js    Serverless   Edge
--------------------------------------------------------
μ½λ“ λ¶€ν…       λ³΄ν†µ        λ‚®μ         λ§¤μ° λ‚®μ
HTTP μ¤νΈλ¦¬λ°   μ§€μ›        μ§€μ›         μ§€μ›
I/O κΈ°λ¥       λ¨λ‘        λ¨λ‘         fetchλ§
ν™•μ¥μ„±         λ†’μ        λ†’μ         λ§¤μ° λ†’μ
λ³΄μ•           λ³΄ν†µ       λ†’μ         λ†’μ
μ§€μ—° μ‹κ°„       λ³΄ν†µ        λ‚®μ         λ§¤μ° λ‚®μ
npm ν¨ν‚¤μ§€     λ¨λ‘        λ¨λ‘         μΌλ¶€λ§
μ •μ  λ λ”λ§     μ§€μ›        μ§€μ›         λ―Έμ§€μ›
λ™μ  λ λ”λ§     μ§€μ›        μ§€μ›         μ§€μ›

```

### λ°νƒ€μ„ μ„¤μ • λ°©λ²•

- λ μ΄μ•„μ›ƒ λ λ²¨ μ„¤μ •
  ```tsx
  // app/layout.tsx
  export const runtime = "edge"; // λ¨λ“  ν•μ„ λΌμ°νΈμ— μ μ©
  ```
- νμ΄μ§€ λ λ²¨ μ„¤μ •
  ```tsx
  // app/page.tsx
  export const runtime = "edge"; // νΉμ • νμ΄μ§€μ—λ§ μ μ©
  ```

### μ‚¬μ© μ‹ κ³ λ ¤μ‚¬ν•­

- Edge λ°νƒ€μ„
  - κ°„λ‹¨ν• λ™μ  μ½ν…μΈ  μ κ³µμ— μ ν•©
  - λ‚®μ€ μ§€μ—° μ‹κ°„μ΄ μ¤‘μ”ν• κ²½μ°
  - λ¦¬μ†μ¤ μ ν•μ„ κ³ λ ¤ν•΄μ•Ό ν•¨
- Node.js λ°νƒ€μ„:
  - λ³µμ΅ν• μ—°μ‚°μ΄ ν•„μ”ν• κ²½μ°
  - λ§μ€ npm ν¨ν‚¤μ§€λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ” κ²½μ°
  - νμΌ μ‹μ¤ν… μ ‘κ·Όμ΄ ν•„μ”ν• κ²½μ°
- Serverless Node.js
  - ν™•μ¥ κ°€λ¥ν• μ†”λ£¨μ…μ΄ ν•„μ”ν• κ²½μ°
  - λ³µμ΅ν• μ—°μ‚°μ΄ ν•„μ”ν•μ§€λ§ κ΄€λ¦¬λ” κ°„νΈν•κ² ν•κ³  μ‹¶μ€ κ²½μ°
  - μ½”λ“ ν¬κΈ° μ ν•μ΄ 50MBλ΅ λ” μ—¬μ λ΅μ›€
