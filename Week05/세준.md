# Server Components

μ„λ²„ μ»΄ν¬λ„νΈλ” UIλ¥Ό μ„λ²„μ—μ„ λ λ”λ§ν•κ³ , ν•„μ”ν• κ²½μ° μΊμ‹±ν•  μ μλ” κΈ°λ¥μ„ μ κ³µν•λ‹¤.

Nextjsμ—μ„λ” `λΌμ°νΈ μ„Έκ·Έλ¨ΌνΈ`λ¥Ό κΈ°λ°μΌλ΅ λ λ”λ§ μ‘μ—…μ„ λ¶„ν• ν•μ—¬ μ¤νΈλ¦¬λ° λ° λ¶€λ¶„ λ λ”λ§μ„ κ°€λ¥ν•κ² ν•λ‹¤.

μ„λ²„ λ λ”λ§μ—μ„λ” μ„Έ κ°€μ§€ μ£Όμ” μ „λµμ΄ μ΅΄μ¬ν•λ‹¤.

- `μ •μ  λ λ”λ§`
  - λΉλ“ μ‹ HTMLμ„ λ―Έλ¦¬ μƒμ„±ν•μ—¬ μΊμ‹±ν•λ” λ°©μ‹
- `λ™μ  λ λ”λ§`
  - μ”μ²­λ§λ‹¤ μƒλ΅μ΄ HTMLμ„ μƒμ„±ν•λ” λ°©μ‹
- `μ¤νΈλ¦¬λ°`
  - λ λ”λ§λ μ½ν…μΈ λ¥Ό ν΄λΌμ΄μ–ΈνΈμ— μ μ§„μ μΌλ΅ μ „μ†΅ν•λ” λ°©μ‹

## μ„λ²„ λ λ”λ§μ μ¥μ 

- `λ°μ΄ν„° κ°€μ Έμ¤κΈ° μµμ ν™”`
  - μ„λ²„μ—μ„ μ§μ ‘ λ°μ΄ν„°λ¥Ό κ°€μ Έμ™€ λΉ λ¥΄κ² μ²λ¦¬.
- `λ³΄μ• κ°•ν™”`
  - λ―Όκ°ν• μ •λ³΄λ¥Ό ν΄λΌμ΄μ–ΈνΈμ— λ…Έμ¶μ‹ν‚¤μ§€ μ•μ
  - API ν‚¤, μΈμ¦ ν† ν° λ“±
- `μΊμ‹±`
  - μ„λ²„μ—μ„ λ λ”λ§λ κ²°κ³Όλ¥Ό μ¬μ‚¬μ© κ°€λ¥
- `μ„±λ¥ μµμ ν™”`
  - λ¶ν•„μ”ν• ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ JS λ΅λ“λ¥Ό κ°μ†
  - μΈν„°λ ‰ν‹°λΈν•μ§€ μ•μ€ μ½ν…μΈ λ“¤μ„ μ„λ²„ μ»΄ν¬λ„νΈλ΅ μ΄λ™ μ‹μΌ JS μ‹¤ν–‰λ‰μ„ μ¤„μΌ μ μμ
  - μ €μ† λ„¤νΈμ›ν¬ ν™κ²½ λλ” μ„±λ¥μ΄ λ‚®μ€ κΈ°κΈ°μ—μ„ λ” λΉ λ¥Έ λ΅λ”© μ κ³µ
- `μ΄κΈ° νμ΄μ§€ λ΅λ“ λ° FCP κ°μ„ `
  - μ„λ²„μ—μ„ HTMLμ„ λ―Έλ¦¬ μƒμ„±ν•μ—¬ λΉ λ¥΄κ² νμ΄μ§€λ¥Ό ν‘μ‹ν•  μ μμ.
  - ν΄λΌμ—μ„ JS λ°›κ³  μ‹¤ν–‰ν•  ν•„μ” μ—†μ΄ μ¦‰μ‹ μ»¨ν…μΈ  ν™•μΈ κ°€λ¥
- `SEO μµμ ν™”`
  - κ²€μƒ‰ μ—”μ§„ λ΄‡μ΄ λ―Έλ¦¬ λ λ”λ§λ HTMLμ„ μ‰½κ² ν¬λ΅¤λ§ κ°€λ¥
- `μ¤νΈλ¦¬λ° μ§€μ›`
  - μ¤νΈλ¦¬λ°μ„ ν™μ©ν• λ¶€λ¶„ λ λ”λ§μ΄ κ°€λ¥
  - μ„λ²„κ°€ μ¤€λΉ„λ λ°μ΄ν„°λ¥Ό ν΄λΌμ— μ μ§„μ μΌλ΅ μ „μ†΅ν•μ—¬ λ” λΉ λ¥΄κ² νμ΄μ§€ ν‘μ‹

## μ„λ²„ μ»΄ν¬λ„νΈ λ λ”λ§ λ°©μ‹

λ λ”λ§ μ‘μ—…μ„ μ—¬λ¬ κ°μ μ²­ν¬λ΅ λ¶„ν• ν•μ—¬ `λΌμ°νΈ μ„Έκ·Έλ¨ΌνΈ` λ° `μ„μ¤νμ¤ λ°”μ΄λ”λ¦¬`λ¥Ό μ΄μ©ν•΄ λ¶€λ¶„μ μΌλ΅ λ λ”λ§ν•λ‹¤.

### μ„λ²„μ—μ„μ λ λ”λ§ κ³Όμ •

1. Reactκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό νΉλ³„ν• λ°μ΄ν„° ν•μ‹μΈ RSC Payloadλ΅ λ λ”λ§
2. Next.jsκ°€ RSC Payloadμ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ μλ°”μ¤ν¬λ¦½νΈλ¥Ό μ΄μ©ν•μ—¬ HTMLμ„ μƒμ„±

### ν΄λΌμ΄μ–ΈνΈμ—μ„μ μ²λ¦¬ κ³Όμ •

1. HTMLμ΄ μ¦‰μ‹ ν‘μ‹
2. Reactκ°€ RSC Playloadλ¥Ό μ‚¬μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ»΄ν¬λ„νΈ νΈλ¦¬λ¥Ό λ™κΈ°ν™”
3. JS μ‹¤ν–‰λλ©° ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ ν™μ„±ν™” (ν•μ΄λ“λ μ΄μ…)

### RSC Payload

RSC Payloadλ” μ„λ²„μ—μ„ λ λ”λ§λ λ¦¬μ•΅νΈ μ„λ²„ μ»΄ν¬λ„νΈ νΈλ¦¬λ¥Ό μ••μ¶•λ λ°”μ΄λ„λ¦¬ ν•μ‹μΌλ΅ μ €μ¥ν• λ°μ΄ν„°μ΄λ‹¤. μ΄ λ°μ΄ν„°λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ λ¦¬μ•΅νΈκ°€ DOMμ„ μ—…λ°μ΄νΈν•λ” λ° μ‚¬μ©λλ‹¤.

λ‹¤μκ³Ό κ°™μ€ λ‚΄μ©μ„ λ‹΄κ³  μλ‹¤.

- μ„λ²„ μ»΄ν¬λ„νΈμ λ λ”λ§ κ²°κ³Ό
- `ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ λ λ”λ§λ  μλ¦¬`μ™€ ν•΄λ‹Ή μλ°”μ¤ν¬λ¦½νΈ νμΌ μ°Έμ΅°
- μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ `ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ μ „λ‹¬λλ” Props` μ •λ³΄
- μ°Έκ³ λ΅ RSC Payloadμ™€ λ°μ΄ν„°λ” λ³„λ„μ μΊμ‹λ¥Ό κ°€μ§

## μ„λ²„ λ λ”λ§ μ „λµ

Next.js μ—μ„λ” μ„λ²„ λ λ”λ§μ„ μ„Έ κ°€μ§€ λ°©μ‹μΌλ΅ λ‚λ μ μλ‹¤.

### 1. μ •μ  λ λ”λ§

- νμ΄μ§€λ¥Ό λ―Έλ¦¬ μƒμ„±ν•μ—¬ μΊμ‹±ν•κ³ , CDNμ— λ°°ν¬ν•λ” λ°©μ‹
- λ„¥μ¤νΈμ—μ„ κΈ°λ³Έμ μΌλ΅ μ‚¬μ©λλ” λ λ”λ§ λ°©μ‹
- νμ΄μ§€κ°€ μ²μ μ”μ²­λ  λ• μ„λ²„κ°€ μ•„λ‹λΌ μΊμ‹±λ HTMLμ„ λ°”λ΅ μ κ³µ
- μ‚¬μ©μλ³„λ΅ λ³€κ²½λμ§€ μ•λ” νμ΄μ§€μ—μ„ μ μ© (λΈ”λ΅κ·Έ, μ ν’ μƒμ„Έ νμ΄μ§€ λ“±)
- λΉλ“ μ‹μ μ— λ°μ΄ν„°λ¥Ό λ―Έλ¦¬ κ°€μ Έμ¬ μ μλ” κ²½μ° μ μ©

### 2. λ™μ  λ λ”λ§

- μ‚¬μ©μμ μ”μ²­μ΄ λ°μƒν•  λ•λ§λ‹¤ μƒλ΅μ΄ HTMLμ„ μƒμ„±ν•λ” λ°©μ‹
- μ‚¬μ©μ λ§μ¶¤ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•λ” νμ΄μ§€μ— μ‚¬μ©
- `Dynamic API`λ¥Ό μ‚¬μ©ν•κ±°λ‚ `fetch no-store` μµμ…μ„ μ‚¬μ©ν•μ—¬ λ™μ  λ λ”λ§

| **λ™μ  API μ‚¬μ© μ—¬λ¶€** | **λ°μ΄ν„° μΊμ‹± μ—¬λ¶€** | **λΌμ°νΈ(Rendering) λ°©μ‹** |
| --- | --- | --- |
| β No | β… Cached | **μ •μ  λ λ”λ§(Static Rendering)** |
| β… Yes | β… Cached | **λ™μ  λ λ”λ§(Dynamic Rendering)** |
| β No | β Not Cached | **λ™μ  λ λ”λ§(Dynamic Rendering)** |
| β… Yes | β Not Cached | **λ™μ  λ λ”λ§(Dynamic Rendering)** |

### 3. μ¤νΈλ¦¬λ° λ λ”λ§

- μ„λ²„μ—μ„ λ λ”λ§λ UIλ¥Ό μ²­ν¬ λ‹¨μ„λ΅ λ¶„ν• ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ— μ μ§„μ μΌλ΅ μ „μ†΅ν•λ” λ°©μ‹
- loading.js νΉμ€ Suspense μ‚¬μ©

# Client Component

ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ‚¬μ©μ μΈν„°λ ‰μ…μ„ μ²λ¦¬ν•κ³ , λΈλΌμ°μ €μ—μ„ μ‹¤ν–‰λλ” μλ°”μ¤ν¬λ¦½νΈ κΈ°λ¥μ„ ν™μ©ν•  μ μλ” λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈμ΄λ‹¤.

## ν΄λΌμ΄μ–ΈνΈ λ λ”λ§ μ¥μ 

- μΈν„°λ™ν‹°λΈ UI
  - λ²„νΌ ν΄λ¦­, μ…λ ¥ νΌ , λ¨λ‹¬ λ“±
  - μ‚¬μ©μ μ…λ ¥μ„ μ¦‰μ‹ λ°μ
- `λΈλΌμ°μ € API` μ‚¬μ© κ°€λ¥
  - λ΅μ»¬ μ¤ν† λ¦¬μ§€, window κ°μ²΄ λ“±

## ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ μ‚¬μ© λ°©λ²•

`β€use client"` μ§€μ‹λ¬Έμ„ μ¶”κ°€ν•΄μ•Όν•λ‹¤.

μ΄ μ§€μ‹λ¬Έμ„ μ„ μ–Έν•λ©΄ ν•΄λ‹Ή νμΌκ³Ό κ·Έ μ•μ—μ„ import λλ” λ¨λ“  λ¨λ“μ΄ ν΄λΌμ΄μ–ΈνΈ λ²λ“¤μ— ν¬ν•¨λλ‹¤.

### use clientκ°€ μ—†μΌλ©΄ λ°μƒν•λ” λ¬Έμ 

λ„¥μ¤νΈμ—μ„λ” κΈ°λ³Έμ μΌλ΅ λ¨λ“  μ»΄ν¬λ„νΈκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ΅ μ²λ¦¬λ¨.

ν΄λΌμ΄μ–ΈνΈμ—μ„λ§ μ‹¤ν–‰ κ°€λ¥ν• κΈ°λ¥μ„ μ‚¬μ©ν•λ©΄ μ—λ¬ λ°μƒ (useState λ“±)

## ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ λ”λ§ λ°©μ‹

ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ”μ²­ λ°©μ‹μ— λ”°λΌ λ‹¤λ¥΄κ² λ λ”λ§λλ‹¤.

- Full Page Load
- Subsequent Navigation

π΅Β μ΄κ±° λ¬Έμ„μ—μ„ ν—·κ°λ¦¬κ² μ¨λ†¨λ”λ° ν΄λΌ μ»΄ν¬λ„νΈ λ λ”λ§ λ°©μ‹μ΄ μ•„λ‹ λ„¥μ¤νΈ μ „μ²΄ λ λ”λ§ λ°©μ‹μ΄ λ§λ” ν‘ν„μΈλ“―

### Full Page Load

μ‚¬μ©μκ°€ μ›Ήμ‚¬μ΄νΈλ¥Ό μ²μ λ°©λ¬Έν•κ±°λ‚ μƒλ΅κ³ μΉ¨μ„ ν–μ„ λ• λ°μƒν•λ” λ λ”λ§ λ°©μ‹μ΄λ‹¤.

μ‚¬μ‹¤μƒ μ„λ²„ λ λ”λ§κ³Ό λ³„ μ°¨μ΄κ°€ μ—†λ‹¤.

μ°μ„  μ΄ κ²½μ° μ„λ²„μ—μ„λ” λ‹¤μκ³Ό κ°™μ΄ μ‹¤ν–‰λλ‹¤.

1. Reactκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•μ—¬ RSC Payload μƒμ„±
2. λ„¥μ¤νΈκ°€ RSC Payloadλ¥Ό ν™μ©ν•μ—¬ μ„λ²„μ—μ„ HTMLμ„ λ―Έλ¦¬ μƒμ„±
3. HTMLμ—λ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ μλ¦¬λ§ ν‘μ‹λκ³ , μλ°”μ¤ν¬λ¦½νΈ ν¬ν•¨λμ§€ μ•μ

κ·Έ μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ—μ„μ μ‹¤ν–‰ κ³Όμ •

1. λΈλΌμ°μ €λ” μ„λ²„μ—μ„ λ°›μ€ HTMLμ„ μ¦‰μ‹ ν‘μ‹
2. λΈλΌμ°μ €κ°€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ μλ°”μ¤ν¬λ¦½νΈ λ²λ“¤μ„ λ‹¤μ΄λ΅λ“ λ° μ‹¤ν–‰
3. ν•μ΄λ“λ μ΄μ…

### Subsequent Navigation

ν΄λΌμ΄μ–ΈνΈμ—μ„ μ†ν”„νΈ λ„¤λΉ„κ²μ΄μ…μ΄ λ°μƒν•μ€μ„ λ• μ„λ²„μ—μ„ λ‹¤μ‹ HTMLμ„ μƒμ„±ν•μ§€ μ•κ³  ν΄λΌμ΄μ–ΈνΈμ—μ„λ§ λ λ”λ§λλ‹¤.

μ΄ κ²½μ°μ—λ” λ‹¤μκ³Ό κ°™μ΄ λ™μ‘ν•λ‹¤.

1. μ„λ²„μ—μ„ μƒλ΅μ΄ HTMLμ„ λ°›μ§€ μ•κ³ , ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒλ΅μ΄ μλ°”μ¤ν¬λ¦½νΈ λ²λ“¤ λ‹¤μ΄λ΅λ“
2. RSC Payloadλ¥Ό μ΄μ©ν•μ—¬ UIλ¥Ό μ—…λ°μ΄νΈ
3. ν΄λΌμ΄μ–ΈνΈμ—μ„λ§ μƒλ΅μ΄ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•μ—¬ DOM μ—…λ°μ΄νΈ

# Composition Patterns

μ„λ²„ μ»΄ν¬λ„νΈμ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό μ΅°ν•©ν•μ—¬ μ„±λ¥μ„ μµμ ν™” ν•λ‹¤.

## μ„λ²„ μ»΄ν¬λ„νΈ ν¨ν„΄

ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ μ „ν™ν•κΈ° μ „μ— μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ™€ μ²λ¦¬ν•λ©΄ μ„±λ¥ μµμ ν™”κ°€ κ°€λ¥ν•λ‹¤.

### 1οΈβƒ£Β μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ λ°μ΄ν„°λ¥Ό κ³µμ ν•λ” ν¨ν„΄

- μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¬ λ•, μ—¬λ¬ μ»΄ν¬λ„νΈμ—μ„ λ™μΌν• λ°μ΄ν„°λ¥Ό ν•„μ”λ΅ ν•λ” κ²½μ°
- `fetch()` μΊμ‹ μµμ…μ„ μ‚¬μ©ν•μ—¬ μ¤‘λ³µ μ”μ²­μ„ λ°©μ§€
- `cache()` ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ¥Ό μΊμ‹ν•μ—¬ μ¤‘λ³µ μ—°μ‚° λ°©μ§€

### 2οΈβƒ£Β μ„λ²„ μ „μ© μ½”λ“κ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‹¤ν–‰λμ§€ μ•λ„λ΅ λ³΄νΈν•κΈ°

- μ„λ²„ μ „μ© μ½”λ“κ°€ μ‹¤μλ΅ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‹¤ν–‰λμ§€ μ•λ„λ΅ μ£Όμν•΄μ•Όν•¨
- API ν‚¤, DB μ—°κ²° μ •λ³΄λ” μ„λ²„μ—μ„λ§ μ‚¬μ©λμ–΄μ•Όν•¨
- `server-only` ν¨ν‚¤μ§€λ¥Ό ν™μ©ν•λ©΄ μ„λ²„ μ „μ© μ½”λ“κ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‹¤ν–‰λμ§€ μ•λ„λ΅ν•¨

```dart
import "server-only"; // π¨ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‹¤ν–‰ μ‹ λΉλ“ μ—λ¬ λ°μƒ

export async function getData() {
  const res = await fetch("https://external-service.com/data", {
    headers: {
      authorization: process.env.API_KEY, // NEXT_PUBLICμ΄ μ•„λ‹ ν™κ²½λ³€μ
    },
  });

  return res.json();
}
```

λ°λ€λ΅ `client-only` ν¨ν‚¤μ§€λ„ μ΅΄μ¬ν•¨

λΈλΌμ°μ € μ „μ© APIλ¥Ό μ‚¬μ©ν•λ” κ²½μ° μ„¤μ •ν•λ©΄ μΆ‹μ

```dart
import "client-only"; // π¨ μ„λ²„μ—μ„ μ‹¤ν–‰ μ‹ λΉλ“ μ—λ¬ λ°μƒ

export function getWindowWidth() {
  return window.innerWidth;
}
```

### 3οΈβƒ£Β μ„λ“νν‹° ν¨ν‚¤μ§€ λ° ν”„λ΅λ°”μ΄λ” μ‚¬μ©

μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μΌλ¶€ μ„λ“νν‹° ν¨ν‚¤μ§€κ°€ μ •μƒμ μΌλ΅ λ™μ‘ν•μ§€ μ•λ” κ²½μ°κ°€ μΆ…μΆ… μλ‹¤.

μλ¥Ό λ“¤μ–΄, `useState, useEffect, createContext` λ“±μ„ μ‚¬μ©ν•λ” ν¨ν‚¤μ§€μΈλ° `β€use clientβ€™` ν‚¤μ›λ“λ¥Ό μ‘μ„±ν•μ§€ μ•μ€ μƒνƒλ΅ λ°°ν¬λλ” κ²½μ°μ΄λ‹¤.

μ΄ λ• ν΄λΌμ΄μ–ΈνΈ μ „μ© μ»΄ν¬λ„νΈλ΅ κ°μ‹Έμ„ ν•΄κ²°ν•  μ μλ‹¤.

```dart
// app/carousel.tsx (ν΄λΌμ΄μ–ΈνΈ μ „μ© λνΌ)
"use client";

import { Carousel } from "acme-carousel"; // β… ν΄λΌμ΄μ–ΈνΈ μ „μ© ν¨ν‚¤μ§€

export default Carousel;
```

```dart
// app/page.tsx (μ„λ²„ μ»΄ν¬λ„νΈ)
import Carousel from "./carousel"; // β… ν΄λΌμ΄μ–ΈνΈ μ „μ© λνΌ μ‚¬μ©

export default function Page() {
  return (
    <div>
      <p>View pictures</p>

      {/* β… μ •μƒ λ™μ‘: Carouselμ΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‹¤ν–‰λ¨ */}
      <Carousel />
    </div>
  );
}
```

ν”„λ΅λ°”μ΄λ”λ¥Ό μ‚¬μ©ν•λ” κ²½μ°μ—λ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ ν• λ² μ„ μ–Έν•κ³  μ‚¬μ©ν•΄μ•Όν•λ‹¤.

```dart
// app/theme-provider.tsx (ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ)
"use client";

import { createContext, useState } from "react";

export const ThemeContext = createContext({});

export default function ThemeProvider({ children }: { children: React.ReactNode }) {
  const [theme, setTheme] = useState("dark");

  return <ThemeContext.Provider value={{ theme, setTheme }}>{children}</ThemeContext.Provider>;
}
```

## ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ ν¨ν„΄

### 1οΈβƒ£Β ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό νΈλ¦¬ μ•„λλ΅ μ΄λ™

- λ„¥μ¤νΈμ—μ„λ” μµλ€ν• μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό ν™μ©ν•λ”κ² μΆ‹μ
- ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό μµλ€ν• μ•„λ νΈλ¦¬λ΅ μ΄λ™μ‹μΌ λ²λ“¤ μ‚¬μ΄μ¦λ¥Ό μ¤„μΌ μ μμ

### 2οΈβƒ£Β μ„λ²„μ—μ„ κ°€μ Έμ¨ λ°μ΄ν„°λ¥Ό ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ μ „λ‹¬

- μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ ν΄λΌ μ»΄ν¬λ„νΈλ΅ propsλ¥Ό μ „λ‹¬ν•  λ• μ§λ ¬ν™”λμ§€ μ•μ€ κ°’μ€ μ „λ‹¬ν•  μ μ—†μ
- κ·Έλμ„ ν•¨μλ¥Ό μ „λ‹¬ λ¶κ°€

## μ„λ²„ μ»΄ν¬λ„νΈμ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ νΌν•© μ‚¬μ©

μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ ν• λ²λ§ μ΄λ™ κ°€λ¥ν•λ©°, ν΄λΌμ΄μ–ΈνΈμ—μ„ λ‹¤μ‹ μ„λ²„λ΅ μ§μ ‘ μ΄λ™ν•  μ μ—†μ

μ¦‰, μƒ μ”μ²­μ΄ ν•„μ”ν•¨.

1. Next.jsλ” μ„λ²„μ—μ„ μ„λ²„ μ»΄ν¬λ„νΈλ“¤μ„ λ λ”λ§ (Server Components) β†’ React Server Component Payload(RSC Payload) μƒμ„±
2. μ΄ RSC Payloadλ” ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬λλ©°, Reactκ°€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ(Client Components)λ¥Ό κ²°ν•©ν•μ—¬ μµμΆ… UIλ¥Ό κµ¬μ„±
3. ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ‚΄μ—μ„ μ„λ²„ λ°μ΄ν„°λ¥Ό λ‹¤μ‹ μ”μ²­ν•΄μ•Ό ν•λ” κ²½μ°, μƒλ΅μ΄ μ”μ²­μ„ λ³΄λ‚΄μ•Ό ν•¨.

### 1οΈβƒ£Β μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ μ§μ ‘ importν•λ©΄ μ¤λ¥ λ°μƒ

- ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μ§μ ‘ μ„ν¬νΈν•λ©΄ μ—λ¬κ°€ λ°μƒ
- `props`λ¥Ό ν†µν•΄ μ „λ‹¬ν•΄μ•Όν•¨

```dart
// app/page.tsx (μ„λ²„ μ»΄ν¬λ„νΈ)
import ClientComponent from "./ClientComponent";
import ServerComponent from "./ServerComponent";

export default function Page() {
  return (
    <ClientComponent>
      <ServerComponent /> {/* β… μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ childrenμΌλ΅ μ „λ‹¬ */}
    </ClientComponent>
  );
}
```

μ„λ²„ μ»΄ν¬λ„νΈκ°€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ propsλ΅ λ“¤μ–΄κ°€ μλ”λΌλ„ λ„¥μ¤νΈ λ λ”λ§ λ°©μ‹μ— λ”°λΌ μ„λ²„ μ»΄ν¬λ„νΈκ°€ λ¨Όμ € λ λ”λ§λ ν›„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬λ¨.

- μ£Όμν•  μ μ€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ‚΄λ¶€μ μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈμ—μ„ μ¬λ λ”λ§λμ§€ μ•μ
- ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μ—…λ°μ΄νΈν•λ ¤λ©΄ μƒλ΅μ΄ μ”μ²­μ΄ ν•„μ”ν•¨

# Partial Prerendering

μ •μ  λ λ”λ§κ³Ό λ™μ  λ λ”λ§μ„ λ™μΌν• κ²½λ΅μ—μ„ κ²°ν•©ν•  μ μλ„λ΅ ν•΄μ£Όλ” μ‹¤ν—μ  κΈ°λ¥μ΄λ‹¤.

μ¦‰, κΈ°μ΅΄μ λΌμ°νΈ μ„Έκ·Έλ¨ΌνΈ λ‹¨μ„μ λ λ”λ§ λ°©μ‹ μ—¬λ¶€λ¥Ό κ²°μ •ν•λ” κ²ƒμ΄ μ•„λ‹ μ»΄ν¬λ„νΈ λ‹¨μ„λ΅ λ λ”λ§ λ°©μ‹μ„ μ •ν•  μ μκ² ν•λ” κΈ°λ¥μ΄λ‹¤.

ν„μ¬λ” μ‹¤ν— λ²„μ „μ΄κ³  ν”„λ΅λ•μ…μ—μ„λ” μ‚¬μ©ν•  μ μ—†λ‹¤.

## λ°±κ·ΈλΌμ΄λ“

- PPRμ€ μ„λ²„κ°€ μ •μ  μ½ν…μΈ λ¥Ό μ¦‰μ‹ μ „μ†΅ν•  μ μλ„λ΅ ν•¨
- λ™μ  μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈμ μλ°”μ¤ν¬λ¦½νΈκ°€ λ΅λ“λκΈ° μ „μ— μ„λ²„μ—μ„ λ³‘λ ¬λ΅ μ¤νΈλ¦¬λ°λ¨
- μ—¬λ¬ κ°μ HTTP μ”μ²­μ„ μƒμ„±ν•μ§€ μ•κ³ , μ •μ  ν”„λ¦¬λ λ”λ§λ μ½ν…μΈ μ™€ λ™μ  μ»΄ν¬λ„νΈλ¥Ό ν•λ‚μ HTTP μ‘λ‹µμΌλ΅ κ²°ν•©ν•¨
- κ²°κ³Όμ μΌλ΅, ν΄λΌμ΄μ–ΈνΈμ—μ„ λ¶ν•„μ”ν• λ„¤νΈμ›ν¬ μ”μ²­μ„ μ¤„μ„

## PPR μ μ©ν•΄λ³΄κΈ°

next15 Canary λ²„μ „μ—μ„ μ‹¤ν—μ μΌλ΅ μ‚¬μ© κ°€λ¥

```dart
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  experimental: {
    ppr: 'incremental',
  },
}

export default nextConfig
```

```dart
import { Suspense } from 'react'
import { StaticComponent, DynamicComponent, Fallback } from '@/app/ui'

export const experimental_ppr = true

export default function Page() {
  return (
    <>
      <StaticComponent />
      <Suspense fallback={<Fallback />}>
        <DynamicComponent />
      </Suspense>
    </>
  )
}
```

<br/>
<br/>
<br/>

## 1οΈβƒ£Β μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ axios μ‚¬μ©ν•΄μ„ λ°μ΄ν„° κ°€μ Έμ¤λ©΄ λ™μ  λΉλ“?

λΉλ“ λλ ¤λ΄¤μ„ λ• μ •μ  λΉλ“ νμ΄μ§€λΌκ³  λ‚μ¤κΈ΄ ν•¨. λ€μ‹  λ°μ΄ν„°λ” λ§¤λ² λ¶λ¬μ΄.

## 2οΈβƒ£Β use() μ΄κ±° μ–Έμ  μ‚¬μ©?

μ°μ„  κ³µμ‹λ¬Έμ„μ—μ„ κ¶μ¥ν•λ” μ¤νΈλ¦¬λ° λ°©μ‹μ„ μ‚¬μ©ν•΄λ³΄μ

```tsx
import { Suspense } from 'react';
import ServerPost1 from './_components/server-post-1';
import ServerPost2 from './_components/server-post-2';

export default function StreamingPage() {
  return (
    <div className="flex flex-col gap-20">
      <Suspense fallback={<Loading />}>
        <ServerPost1 />
      </Suspense>

      <Suspense fallback={<Loading />}>
        <ServerPost2 />
      </Suspense>
    </div>
  );
}

// server-post-1.tsx μ„λ²„ μ»΄ν¬λ„νΈ
import { getData } from '@/utils/api';

export default async function ServerPost1() {
  const data = await getData();
  return <div>{data.title}</div>;
}

// server-post-2.tsx μ„λ²„ μ»΄ν¬λ„νΈ
import { getData } from '@/utils/api';

export default async function ServerPost2() {
  const data = await getData();
  return <div>{data.title}</div>;
}
```

- μμ‹μ—μ„λ” κ°„λ‹¨ν•κ² νƒ€μ΄ν‹€λ§ λ³΄μ—¬μ£Όλ” ν•νƒ
- ν•μ§€λ§ μ‹¤μ λ΅λ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ— λ°μ΄ν„°λ¥Ό λ„κ²¨μ£Όλ” ν•νƒκ°€ λ  κ²ƒ.
- κ·Έλ ‡λ‹¤λ©΄ μ¤νΈλ¦¬λ° κΈ°λ¥μ„ μ‚¬μ©ν•κΈ° μ„ν•΄ μ„λ²„ λ°μ΄ν„°λ¥Ό λ¶λ¬μ¤λ” ν•λ‚μ κΉμ΄κ°€ μ¶”κ°€λκ² λ¨

μ΄ λ• `use()`μ„ μ‚¬μ©ν•λ©΄ λ³„λ„μ λμ¤ μ—†μ΄ λ°”λ΅ μ‚¬μ©ν•  μ μμ

```tsx
export default function StreamingPage() {
  const promise1 = getData();
  const promise2 = getData();

  return (
    <div className="flex flex-col gap-20">
      <Suspense fallback={<Loading />}>
        <ClientPost1 promise={promise1} />
      </Suspense>
      <Suspense fallback={<Loading />}>
        <ClientPost2 promise={promise2} />
      </Suspense>
    </div>
  );
}

// client-post-1.tsx ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ
('use client');
import { use } from 'react';

interface PropsType {
  promise: Promise<{ title: string }>;
}

export default function ClientPost1({ promise }: PropsType) {
  const data = use(promise);

  return <div>{data.title}</div>;
}
```

μ΄κ±΄ μ•λλ‚?

```tsx
export default function ClientPost1() {
  const data = use(getData());

  return <div>{data.title}</div>;
}
```

ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒμ„±λ Promiseλ” λ λ”λ§λ γ„Έ)λ§λ‹¤ λ‹¤μ‹ μƒμ„±λ¨. λ°μ΄ν„° λ°›μ•„μ¬ λ•λ§λ‹¤ λ‹¤μ‹ μ”μ²­λ³΄λƒ„.

## 3οΈβƒ£Β ν΄λΌμ»΄ν¬λ„νΈ λ‚΄λ¶€μ— μ„λ²„ μ»΄ν¬λ„νΈ μλ” κ²½μ° ν΄λΌ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ μ‹μΌ°μ„ λ• μ„λ²„λ„ κ°™μ΄ λ λ”λ§λλ”μ§€?

λ¬Όλ΅  μ•„λ‹μ§€λ§ ν™•μ‹¤ν•κ² γ„±γ„±

### μƒμ„ μ»΄ν¬λ„νΈ

```tsx
export default function CompositionPage() {
  return (
    <div>
      <ClientComp>
        <ServerComp />
      </ClientComp>
    </div>
  );
}
```

### ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ

```tsx
'use client';

import { useState } from 'react';

export default function ClientComp({
  children,
}: {
  children: React.ReactNode;
}) {
  const [count, setCount] = useState(0);
  return (
    <div>
      {children}
      <button onClick={() => setCount(count + 1)}>+</button>
    </div>
  );
}
```

### μ„λ²„ μ»΄ν¬λ„νΈ

```tsx
import { getData } from '@/utils/api';

export default async function ServerComp() {
  const data = await getData();
  return <div>{data.title}</div>;
}
```

μμƒλ€λ΅ ν΄λΌμ΄μ–ΈνΈ λ‚΄λ¶€μ— μ„λ²„ μ»΄ν¬λ„νΈκ°€ μλ”λΌλ„ ν•΄λ‹Ή νμ΄μ§€λ¥Ό μ§„μ…ν•μ€μ„ λ• λ°μ΄ν„°λ¥Ό λ°›μ•„μ¬ λ•κΉμ§€ κΈ°λ‹¤λ¦Ό.

λ¬Όλ΅  `Suspense` μ‚¬μ©ν•λ” κ²½μ°μ—λ” λ€κΈ°ν•μ§€ μ•μ.

```tsx
export default function CompositionPage() {
  return (
    <div>
      <ClientComp>
        <Suspense fallback={<div>Loading...</div>}>
          <ServerComp /> // μ΄ λ°μ΄ν„°λ¥Ό κΈ°λ‹¤λ¦¬μ§€ μ•μ
        </Suspense>
      </ClientComp>
    </div>
  );
}
```
