# Bundle Analyzer

@next/bundle-analyzerëŠ” Next.jsì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ëª¨ë“ˆì˜ í¬ê¸°ë¥¼ ê´€ë¦¬í•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì´ë‹¤.

ì´ í”ŒëŸ¬ê·¸ì¸ì€ ê° ëª¨ë“ˆê³¼ í•´ë‹¹ ì¢…ì†ì„±ì˜ í¬ê¸°ì— ëŒ€í•œ ì‹œê°ì  ë³´ê³ ì„œë¥¼ ìƒì„±í•œë‹¤.

ì´ ì •ë³´ë¥¼ í™œìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

- **í° ì¢…ì†ì„± ì œê±°**
- **ì½”ë“œ ë¶„í•  (Code Splitting)**
- **ì¼ë¶€ ëª¨ë“ˆë§Œ ë¡œë“œí•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡ë˜ëŠ” ë°ì´í„°ëŸ‰ ê°ì†Œ**

### ì„¤ì¹˜

```jsx
npm i @next/bundle-analyzer
# ë˜ëŠ”
yarn add @next/bundle-analyzer
# ë˜ëŠ”
pnpm add @next/bundle-analyzer
```

### **next.config.js ì„¤ì •**

```jsx
const withBundleAnalyzer = require("@next/bundle-analyzer")({
  enabled: process.env.ANALYZE === "true",
});

/** @type {import('next').NextConfig} */
const nextConfig = {};

module.exports = withBundleAnalyzer(nextConfig);
```

ìœ„ ì½”ë“œì—ì„œ í™˜ê²½ ë³€ìˆ˜ ANALYZEë¥¼ trueë¡œ ì„¤ì •í•´ì•¼ ë²ˆë“¤ ë¶„ì„ì´ ì‹¤í–‰ëœë‹¤.

### ë²ˆë“¤ ë¶„ì„ ì‹¤í–‰í•˜ê¸°

```jsx
ANALYZE=true npm run build
# ë˜ëŠ”
ANALYZE=true yarn build
# ë˜ëŠ”
ANALYZE=true pnpm build
```

ëª…ë ¹ì–´ ì‹¤í–‰ í›„ ë¸Œë¼ìš°ì €ì—ì„œ ì„¸ ê°œì˜ ìƒˆ íƒ­ì´ ì—´ë¦¬ë©° ë²ˆë“¤ ë¶„ì„ ë³´ê³ ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ê°œë°œ ì¤‘ ë˜ëŠ” ë°°í¬ ì „ì— ì •ê¸°ì ìœ¼ë¡œ ë²ˆë“¤ í¬ê¸°ë¥¼ ë¶„ì„í•˜ë©´ í° ë²ˆë“¤ì„ ì¡°ê¸°ì— ì‹ë³„í•  ìˆ˜ ìˆìœ¼ë©°,

ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë” ì„±ëŠ¥ ìµœì í™”ëœ êµ¬ì¡°ë¡œ ì„¤ê³„í•  ìˆ˜ ìˆë‹¤.

# Lazy Loading

Next.jsì—ì„œ **Lazy Loading(ì§€ì—° ë¡œë”©)**ì€ ì´ˆê¸° í˜ì´ì§€ ë¡œë”© ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ê¸°ë²•ìœ¼ë¡œ, íŠ¹ì • ë¼ìš°íŠ¸(Route)ë¥¼ ë Œë”ë§í•˜ëŠ” ë° í•„ìš”í•œ **JavaScriptì˜ ì–‘ì„ ì¤„ì´ëŠ” ì—­í• **ì„ í•œë‹¤.

ì´ë¥¼ í†µí•´ **í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸(Client Components)ì™€ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬(Imported Libraries)ì˜ ë¡œë”©ì„ ì§€ì—°**ì‹œí‚¬ ìˆ˜ ìˆìœ¼ë©°,

í•´ë‹¹ ìš”ì†Œê°€ ì‹¤ì œë¡œ í•„ìš”í•  ë•Œë§Œ í´ë¼ì´ì–¸íŠ¸ ë²ˆë“¤ì— í¬í•¨ë˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ëª¨ë‹¬ ì°½ì„ ì‚¬ìš©ì í´ë¦­ ì‹œì—ë§Œ ë¡œë“œí•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

## **Next.jsì—ì„œ Lazy Loadingì„ êµ¬í˜„í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•**

1. **next/dynamicì„ ì‚¬ìš©í•œ ë™ì  import (Dynamic Imports with `next/dynamic`)**
2. **React.lazy()ì™€ Suspenseë¥¼ í™œìš©í•œ ë°©ë²•**

> ê¸°ë³¸ì ìœ¼ë¡œ **ì„œë²„ ì»´í¬ë„ŒíŠ¸(Server Components)**ëŠ” ìë™ìœ¼ë¡œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì´ ì´ë£¨ì–´ì§€ë©°,
>
> ìŠ¤íŠ¸ë¦¬ë°(Streaming) ê¸°ëŠ¥ì„ í™œìš©í•´ UIë¥¼ ì ì§„ì ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì— ì „ì†¡í•  ìˆ˜ ìˆë‹¤.
>
> í•˜ì§€ë§Œ **Lazy Loadingì€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸(Client Components)ì— ì ìš©ëœë‹¤.**

## 1. `next/dynamic` ì„ ì‚¬ìš©í•œ Lazy Loading

`next/dynamic`ì€ **React.lazy()ì™€ Suspenseì˜ ì¡°í•©**ìœ¼ë¡œ,

**app ë””ë ‰í† ë¦¬**ì™€ **pages ë””ë ‰í† ë¦¬**ì—ì„œ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ì—¬ ì ì§„ì ì¸ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.

### `next/dynamic` ì„ ì‚¬ìš©í•œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ë™ì  ê°€ì ¸ì˜¤ê¸°

`app/page.js`

```jsx
"use client"; // í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ì„¤ì •

import { useState } from "react";
import dynamic from "next/dynamic";

// í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ë™ì  import
const ComponentA = dynamic(() => import("../components/A"));
const ComponentB = dynamic(() => import("../components/B"));
const ComponentC = dynamic(() => import("../components/C"), { ssr: false });

export default function ClientComponentExample() {
  const [showMore, setShowMore] = useState(false);

  return (
    <div>
      {/* ì¦‰ì‹œ ë¡œë“œë˜ì§€ë§Œ ë³„ë„ì˜ í´ë¼ì´ì–¸íŠ¸ ë²ˆë“¤ë¡œ ë¡œë“œë¨ */}
      <ComponentA />

      {/* íŠ¹ì • ì¡°ê±´ì´ ì¶©ì¡±ë  ë•Œë§Œ ë¡œë“œë¨ */}
      {showMore && <ComponentB />}
      <button onClick={() => setShowMore(!showMore)}>Toggle</button>

      {/* ì˜¤ì§ í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ë¡œë“œë¨ (SSR ë¹„í™œì„±í™”) */}
      <ComponentC />
    </div>
  );
}
```

### SSR ê±´ë„ˆë›°ê¸°

ê¸°ë³¸ì ìœ¼ë¡œ **React.lazy() ë° Suspenseë¥¼ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ìë™ìœ¼ë¡œ SSRëœë‹¤.**

í•˜ì§€ë§Œ íŠ¹ì • ì»´í¬ë„ŒíŠ¸ì˜ **SSRì„ ë¹„í™œì„±í™”**í•˜ê³  ì‹¶ë‹¤ë©´ `{ ssr: false }` ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

```jsx
const ComponentC = dynamic(() => import("../components/C"), { ssr: false });
```

ì´ë ‡ê²Œ ì„¤ì •í•˜ë©´ **í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ëŠ” ì„œë²„ì—ì„œ ë Œë”ë§ë˜ì§€ ì•Šê³ , ì˜¤ì§ í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ë¡œë“œëœë‹¤.**

### ì„œë²„ ì»´í¬ë„ŒíŠ¸ ê°€ì ¸ì˜¤ê¸°

ë§Œì•½ **ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ë ¤ëŠ” ê²½ìš°**,

ì„œë²„ ì»´í¬ë„ŒíŠ¸ ìì²´ëŠ” Lazy Loadingë˜ì§€ ì•Šìœ¼ë©°,

**ê·¸ í•˜ìœ„ì˜ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë§Œ Lazy Loadingì´ ì ìš©ëœë‹¤.**

### `app/page.js`

```jsx
import dynamic from "next/dynamic";

// ì„œë²„ ì»´í¬ë„ŒíŠ¸
const ServerComponent = dynamic(() => import("../components/ServerComponent"));

export default function ServerComponentExample() {
  return (
    <div>
      <ServerComponent />
    </div>
  );
}
```

ì´ë ‡ê²Œ í•˜ë©´ ì„œë²„ ì»´í¬ë„ŒíŠ¸ëŠ” ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ì§€ë§Œ, ê·¸ ì•ˆì˜ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë§Œ ì§€ì—° ë¡œë”©ëœë‹¤.

## 2. ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë™ì  ë¡œë”©

ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” `import()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ í•„ìš”í•  ë•Œë§Œ ë¡œë“œí•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ ì˜ˆì œì—ì„œëŠ” **Fuse.js(í¼ì§€ ê²€ìƒ‰ ë¼ì´ë¸ŒëŸ¬ë¦¬)**ë¥¼ ë™ì ìœ¼ë¡œ ë¡œë“œí•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤€ë‹¤.

### `app/page.js`

```jsx
"use client";

import { useState } from "react";

const names = ["Tim", "Joe", "Bel", "Lee"];

export default function Page() {
  const [results, setResults] = useState();

  return (
    <div>
      <input
        type="text"
        placeholder="Search"
        onChange={async (e) => {
          const { value } = e.currentTarget;
          // fuse.jsë¥¼ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°
          const Fuse = (await import("fuse.js")).default;
          const fuse = new Fuse(names);

          setResults(fuse.search(value));
        }}
      />
      <pre>Results: {JSON.stringify(results, null, 2)}</pre>
    </div>
  );
}
```

**ìœ„ ì½”ë“œì˜ ë™ì‘ ë°©ì‹**

1. ì‚¬ìš©ìê°€ ê²€ìƒ‰ ì…ë ¥ì„ í•˜ë©´ **ì…ë ¥ ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì´ë²¤íŠ¸ê°€ ì‹¤í–‰ëœë‹¤.**
2. `import('fuse.js')`ë¥¼ ì‚¬ìš©í•˜ì—¬ **Fuse.js ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜¨ë‹¤.**
3. ê°€ì ¸ì˜¨ Fuse.jsë¥¼ ì‚¬ìš©í•˜ì—¬ ì…ë ¥ê°’ê³¼ ì¼ì¹˜í•˜ëŠ” ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.
4. í•„ìš”í•œ ê²½ìš°ì—ë§Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¡œë“œí•˜ê¸° ë•Œë¬¸ì— **ë¶ˆí•„ìš”í•œ ë²ˆë“¤ í¬ê¸° ì¦ê°€ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.**

### **3. ì»¤ìŠ¤í…€ ë¡œë”© ì»´í¬ë„ŒíŠ¸ ì¶”ê°€í•˜ê¸°**

ì»´í¬ë„ŒíŠ¸ê°€ ë¡œë”©ë  ë•Œ ì‚¬ìš©ìì—ê²Œ **ë¡œë”© UI**ë¥¼ ë³´ì—¬ì£¼ë ¤ë©´ `loading` ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### `app/page.js`

```jsx
import dynamic from "next/dynamic";

const WithCustomLoading = dynamic(
  () => import("../components/WithCustomLoading"),
  {
    loading: () => <p>Loading...</p>, // ë¡œë”© ì¤‘ì¼ ë•Œ í‘œì‹œí•  UI
  }
);

export default function Page() {
  return (
    <div>
      {/* ì»´í¬ë„ŒíŠ¸ê°€ ë¡œë”©ë  ë•Œ "Loading..."ì´ ë¨¼ì € í‘œì‹œë¨ */}
      <WithCustomLoading />
    </div>
  );
}
```

ì´ë ‡ê²Œ í•˜ë©´ `WithCustomLoading`ì´ **ì™„ì „íˆ ë¡œë“œë  ë•Œê¹Œì§€ "Loading..."ì´ë¼ëŠ” ë¬¸êµ¬ê°€ í‘œì‹œëœë‹¤.**

### **4. Named Export**

ì¼ë°˜ì ìœ¼ë¡œ `import()`ë¥¼ ì‚¬ìš©í•  ë•Œ **ê¸°ë³¸(default) exportë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.**

í•˜ì§€ë§Œ **Named Exportë¥¼ ê°€ì ¸ì˜¤ë ¤ë©´ `then(mod => mod.<ExportedFunction>)`ì„ ì‚¬ìš©**í•´ì•¼ í•œë‹¤.

### `components/hello.js`

```jsx
"use client";

export function Hello() {
  return <p>Hello!</p>;
}
```

### `app/page.js`

```jsx
import dynamic from "next/dynamic";

// Named Export ê°€ì ¸ì˜¤ê¸°
const ClientComponent = dynamic(() =>
  import("../components/hello").then((mod) => mod.Hello)
);

export default function Page() {
  return (
    <div>
      <ClientComponent />
    </div>
  );
}
```

ì´ë ‡ê²Œ í•˜ë©´ `Hello`ë¼ëŠ” í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë§Œ **ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.**

# Analytics

Next.jsëŠ” **ì›¹ í˜ì´ì§€ì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ê³  ë³´ê³ í•˜ëŠ” ê¸°ëŠ¥ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•œë‹¤**.

ì´ë¥¼ í†µí•´ ì›¹ì‚¬ì´íŠ¸ì˜ ì„±ëŠ¥ì„ ë¶„ì„í•˜ê³  ê°œì„ í•  ìˆ˜ ìˆë‹¤.

**ë‘ ê°€ì§€ ë°©ë²•**ìœ¼ë¡œ ì„±ëŠ¥ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë‹¤.

1. **`useReportWebVitals` í›…ì„ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ ê´€ë¦¬**
2. **Vercelì˜ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ í™œìš© (ìë™ìœ¼ë¡œ ë°ì´í„° ìˆ˜ì§‘ ë° ì‹œê°í™”)**

## **1. ì§ì ‘ ì„±ëŠ¥ ë°ì´í„° ìˆ˜ì§‘í•˜ê¸°**

### **`useReportWebVitals`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„±ëŠ¥ ì§€í‘œ ì¶œë ¥í•˜ê¸°**

ë‹¤ìŒê³¼ ê°™ì´ `useReportWebVitals` í›…ì„ ì‚¬ìš©í•˜ì—¬ **ì›¹ ì„±ëŠ¥ ì§€í‘œ(Web Vitals)ë¥¼ ì¸¡ì •í•˜ê³  ì½˜ì†”ì— ì¶œë ¥**í•  ìˆ˜ ìˆë‹¤.

### `app/_components/web-vitals.js`

```jsx
"use client";

import { useReportWebVitals } from "next/web-vitals";

export function WebVitals() {
  useReportWebVitals((metric) => {
    console.log(metric); // ì¸¡ì •ëœ ì„±ëŠ¥ ë°ì´í„° ì½˜ì†” ì¶œë ¥
  });
}
```

ì´ì œ ìœ„ì—ì„œ ë§Œë“  `WebVitals` ì»´í¬ë„ŒíŠ¸ë¥¼ **ë ˆì´ì•„ì›ƒì— ì¶”ê°€í•œ**ë‹¤.

### `app/layout.js`

```jsx
import { WebVitals } from "./_components/web-vitals";

export default function Layout({ children }) {
  return (
    <html>
      <body>
        <WebVitals />
        {children}
      </body>
    </html>
  );
}
```

---

## **`use client`ë¥¼ ì‚¬ìš©í•œ ì„±ëŠ¥ ìµœì í™”**

- `useReportWebVitals`ëŠ” **í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ë™ì‘**í•˜ê¸° ë•Œë¬¸ì— `"use client"` ì§€ì‹œì–´ê°€ í•„ìš”í•˜ë‹¤.
- ë”°ë¼ì„œ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ **í´ë¼ì´ì–¸íŠ¸ ë°”ìš´ë”ë¦¬ë¥¼ `WebVitals` ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ë¡œ í•œì •**í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
  - ì´ë ‡ê²Œ í•˜ë©´ **ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ìµœì†Œí™”**í•  ìˆ˜ ìˆë‹¤.

---

## **2. Web Vitals (ì›¹ ì„±ëŠ¥ ì§€í‘œ)**

Web VitalsëŠ” **ì‚¬ìš©ìì˜ ì›¹ í˜ì´ì§€ ê²½í—˜ì„ ì¸¡ì •í•˜ê¸° ìœ„í•œ ì£¼ìš” ì§€í‘œ**ë‹¤.

Next.jsëŠ” **ë‹¤ìŒê³¼ ê°™ì€ ì£¼ìš” ì„±ëŠ¥ ì§€í‘œë¥¼ ìë™ìœ¼ë¡œ ì¸¡ì •**í•œë‹¤.

| ì§€í‘œ                                | ì„¤ëª…                                                       |
| ----------------------------------- | ---------------------------------------------------------- |
| **Time to First Byte (TTFB)**       | ì„œë²„ì—ì„œ ì²˜ìŒ ì‘ë‹µì„ ë°›ì„ ë•Œê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„               |
| **First Contentful Paint (FCP)**    | ì²« ë²ˆì§¸ ì½˜í…ì¸ (í…ìŠ¤íŠ¸, ì´ë¯¸ì§€ ë“±)ê°€ í™”ë©´ì— ë Œë”ë§ë˜ëŠ” ì‹œê°„ |
| **Largest Contentful Paint (LCP)**  | ê°€ì¥ í° ì½˜í…ì¸ (ì˜ˆ: íˆì–´ë¡œ ì´ë¯¸ì§€)ê°€ í™”ë©´ì— ë Œë”ë§ë˜ëŠ” ì‹œê°„ |
| **First Input Delay (FID)**         | ì‚¬ìš©ìê°€ ì²˜ìŒìœ¼ë¡œ í˜ì´ì§€ì™€ ìƒí˜¸ì‘ìš©í•  ë•Œê¹Œì§€ì˜ ì§€ì—° ì‹œê°„   |
| **Cumulative Layout Shift (CLS)**   | í˜ì´ì§€ ë¡œë“œ ì¤‘ ë°œìƒí•˜ëŠ” ë ˆì´ì•„ì›ƒ ì´ë™ì˜ ì´ëŸ‰               |
| **Interaction to Next Paint (INP)** | ì‚¬ìš©ìì˜ ì¸í„°ë™ì…˜ í›„ ë‹¤ìŒ í™”ë©´ ì—…ë°ì´íŠ¸ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„    |

> ğŸ’¡ ëª¨ë“  ì„±ëŠ¥ ì§€í‘œ ê²°ê³¼ëŠ” name ì†ì„±ì„ í†µí•´ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.

## **3. íŠ¹ì • ì„±ëŠ¥ ì§€í‘œ ì²˜ë¦¬í•˜ê¸° (TypeScript ì˜ˆì œ)**

ì•„ë˜ ì½”ë“œì—ì„œëŠ” `useReportWebVitals`ë¥¼ ì‚¬ìš©í•˜ì—¬ **ê° ì„±ëŠ¥ ì§€í‘œë³„ë¡œ ë‹¤ë¥¸ ì²˜ë¦¬ë¥¼ ì ìš©í•œë‹¤.**

### `app/_components/web-vitals.tsx`

```tsx
"use client";

import { useReportWebVitals } from "next/web-vitals";

export function WebVitals() {
  useReportWebVitals((metric) => {
    switch (metric.name) {
      case "FCP": {
        // FCP ì„±ëŠ¥ ì§€í‘œ ì²˜ë¦¬ ë¡œì§
        console.log("First Contentful Paint:", metric.value);
        break;
      }
      case "LCP": {
        // LCP ì„±ëŠ¥ ì§€í‘œ ì²˜ë¦¬ ë¡œì§
        console.log("Largest Contentful Paint:", metric.value);
        break;
      }
      // ì¶”ê°€ì ì¸ ì„±ëŠ¥ ì§€í‘œ ì²˜ë¦¬ ê°€ëŠ¥
    }
  });
}
```

> ğŸ“Œ íŠ¹ì • ì„±ëŠ¥ ì§€í‘œì— ëŒ€í•œ ê°œë³„ì ì¸ ë¡œì§ì„ ì¶”ê°€í•˜ì—¬ ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤.

## **4. ì„±ëŠ¥ ë°ì´í„°ë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œìœ¼ë¡œ ì „ì†¡í•˜ê¸°**

ì›¹ ì„±ëŠ¥ ë°ì´í„°ë¥¼ ì„œë²„ ë˜ëŠ” ì™¸ë¶€ ì• ë„ë¦¬í‹±ìŠ¤ ì„œë¹„ìŠ¤ë¡œ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ ì˜ˆì œì—ì„œëŠ” **ì„±ëŠ¥ ë°ì´í„°ë¥¼ íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ë¡œ ì „ì†¡í•˜ëŠ” ë°©ë²•**ì„ ë³´ì—¬ì¤€ë‹¤.

```jsx
useReportWebVitals((metric) => {
  const body = JSON.stringify(metric);
  const url = "https://example.com/analytics"; // ì„±ëŠ¥ ë°ì´í„°ë¥¼ ì „ì†¡í•  ì—”ë“œí¬ì¸íŠ¸

  // `navigator.sendBeacon()`ì´ ì§€ì›ë˜ë©´ ì´ë¥¼ ì‚¬ìš©í•˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ `fetch()` ì‚¬ìš©
  if (navigator.sendBeacon) {
    navigator.sendBeacon(url, body);
  } else {
    fetch(url, { body, method: "POST", keepalive: true });
  }
});
```

**ìœ„ ì½”ë“œì˜ ë™ì‘ ë°©ì‹**

1. **ì¸¡ì •ëœ ì„±ëŠ¥ ë°ì´í„°ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜**
2. **ì„œë²„ë¡œ ì „ì†¡ (`navigator.sendBeacon()` ë˜ëŠ” `fetch()`)**
   - `navigator.sendBeacon(url, body)`ëŠ” **í˜ì´ì§€ê°€ ì–¸ë¡œë“œ(ì´íƒˆ)ë˜ë”ë¼ë„ ìš”ì²­ì„ ë³´ì¥í•œ**ë‹¤.
   - ì§€ì›ë˜ì§€ ì•ŠëŠ” ê²½ìš°, `fetch(url, { method: 'POST', keepalive: true })`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤.

## **5. Google Analyticsë¡œ ì„±ëŠ¥ ë°ì´í„° ì „ì†¡í•˜ê¸°**

Google Analyticsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, **ë©”íŠ¸ë¦­ ë°ì´í„°ë¥¼ `gtag`ë¥¼ í†µí•´ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.**

ì´ë¥¼ í™œìš©í•˜ë©´ **í¼ì„¼íƒ€ì¼(percentile) ê³„ì‚° ë“± ì¶”ê°€ì ì¸ ë¶„ì„ì´ ê°€ëŠ¥í•˜**ë‹¤.

```jsx
useReportWebVitals((metric) => {
  // Google Analyticsì— ë°ì´í„° ì „ì†¡
  window.gtag("event", metric.name, {
    value: Math.round(
      metric.name === "CLS" ? metric.value * 1000 : metric.value
    ), // CLS ê°’ì€ 1000ì„ ê³±í•´ ì •ìˆ˜ ë³€í™˜
    event_label: metric.id, // í˜„ì¬ í˜ì´ì§€ ë¡œë“œì— ëŒ€í•œ ê³ ìœ  ID
    non_interaction: true, // ë°”ìš´ìŠ¤ìœ¨(Bounce Rate)ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ì„¤ì •
  });
});
```

**ì£¼ìš” ì„¤ì •**

- `metric.name`: ì–´ë–¤ ì„±ëŠ¥ ì§€í‘œì¸ì§€ (ì˜ˆ: `LCP`, `CLS`, `FID` ë“±)
- `metric.value`: ì¸¡ì •ëœ ì„±ëŠ¥ ê°’
- `metric.id`: í˜„ì¬ í˜ì´ì§€ ë¡œë“œì— ëŒ€í•œ **ê³ ìœ  ID**
- `non_interaction: true`: **ë°”ìš´ìŠ¤ìœ¨(Bounce Rate)ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ì„¤ì •**

> ğŸ”— ì°¸ê³ : Google Analyticsë¡œ ì„±ëŠ¥ ë°ì´í„° ë³´ë‚´ê¸°
